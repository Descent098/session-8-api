<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Home - API Demo</title>
    <meta name="description" content="A demo of using various API's">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&amp;display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        iframe{
            border-radius:1em;
            min-height: 40vh;
            width: 100%;
            overflow-x: hidden;
        }
    </style>
</head>

<body id="page-top" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="56">
    <nav class="navbar navbar-light navbar-expand-lg fixed-top" id="mainNav">
        <div class="container"><a class="navbar-brand" href="#page-top">API Demo</a><button data-bs-toggle="collapse" data-bs-target="#navbarResponsive" class="navbar-toggler float-end" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><i class="fa fa-bars"></i></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto"></ul>
            </div>
        </div>
    </nav>
    <header class="masthead" style="background: url('assets/img/bg-pattern.png'), linear-gradient(to left, #7b4397, #dc2430);">
        <div class="container h-100">
            <div class="row h-100">
                <div class="col-lg-7 my-auto">
                    <div class="mx-auto header-content">
                        <h1 class="mb-5"><span style="color: rgb(232, 234, 237);">The graph was pulled from an entirely different HTML document!</span><br></h1>
                    </div>
                </div>
                <div class="col-lg-5 my-auto"><iframe src="html/injectable/index.html"></iframe></div>
            </div>
        </div>
    </header>
    <section class="text-center bg-primary download" id="download">
        <div class="container">
            <div class="row">
                <div class="col-md-10 mx-auto">
                    <h2 class="section-heading">Here's a HTML embed</h2>

    <iframe src="html/embedded/index.html" style="height:90vh; width:100%"></iframe>

                </div>
            </div>
        </div>
    </section>
    <section id="features" class="features">
        <div class="container">
            <div class="text-center section-heading">
                <h2>Parsed info</h2>
                <p class="text-muted">The below code is pulled from parsing the content of an HTML page</p>
                <hr>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6" id="parsed"></div>
                <div class="col-md-6" id="frame">
                    <h3>Data taken from this source document</h3>
                    <iframe src="html/parsed/index.html"></iframe>
                </div>
            </div>
        </div>
    </section>
    <footer>
        <div class="container">
            <p>Â©&nbsp;API Demo 2022. All Rights Reserved.</p>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/new-age.js"></script>
    <script>

        fetch('html/parsed/index.html').then( (response)=> 
            // The API call was successful!
            response.text()
        ).then( (html) =>{
            // Take the HTML string and make a new HTML document
            var parser = new DOMParser();
            var doc = parser.parseFromString(html, 'text/html');

            // Use the document and parse it like we normally do in JS
            list_items = doc.getElementsByTagName("li")
            resultHTML = "<h3>This information was taken by parsing HTML</h3>"
            for (let i = 0; i < list_items.length; i++) {
                console.log(list_items[i])
                resultHTML+= `<li>${list_items[i].innerHTML}</li>`
            }

            // Once the new HTML is built, replace the innerHTML of the section we want
            document.getElementById("parsed").innerHTML = resultHTML

        }).catch(function (err) {
            // There was an error
            console.warn('Something went wrong.', err);
        });
    </script>
</body>

</html>